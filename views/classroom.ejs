<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attendance Portal</title>
    <%- include('partials/header')%>
        <%- include('partials/progress')%>
</head>


<body>


    <!-- NavBar -->
    <% if (isLogin==="teacher" ) { %>
        <%- include('partials/loginNavbar1') %>
            <% } else if (isLogin==="student" ) { %>
                <%- include('partials/loginNavbar2') %>
                    <% } else { %>
                        <%- include('partials/Navbar') %>
                            <% } %>

                                <div class="container mt-4">
                                    <div class="row">
                                        <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
                                            <div
                                                class="col-span-1 md:col-span-1 top-0 left-0 w-full md:w-64 bg-white h-full md:border-r">
                                                <div class="overflow-y-auto overflow-x-hidden flex-grow">
                                                    <ul class="flex flex-col py-4 space-y-1">
                                                        <li>
                                                            <a href="#"
                                                                class="menu-item relative flex flex-row items-center h-11 focus:outline-none hover:bg-gray-50 text-gray-600 hover:text-gray-800 border-l-4 border-transparent hover:border-indigo-500 pr-6"
                                                                onclick="swtichTab(5)">
                                                                <span
                                                                    class="inline-flex justify-center items-center ml-4 text-gray-800">
                                                                    <svg class="w-5 h-5" fill="none"
                                                                        stroke="currentColor" viewBox="0 0 24 24"
                                                                        xmlns="http://www.w3.org/2000/svg">
                                                                        <path stroke-linecap="round"
                                                                            stroke-linejoin="round" stroke-width="2"
                                                                            d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z">
                                                                        </path>
                                                                    </svg>
                                                                </span>
                                                                <span
                                                                    class="ml-2 text-sm tracking-wide truncate">Profile</span>
                                                            </a>
                                                        </li>

                                                        <li>
                                                            <a href="#"
                                                                class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-gray-50 text-gray-600 hover:text-gray-800 border-l-4 border-transparent hover:border-indigo-500 pr-6"
                                                                onclick="swtichTab(6)">
                                                                <span
                                                                    class="inline-flex justify-center items-center ml-4">
                                                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none"
                                                                        viewBox="0 0 24 24" stroke-width="1.5"
                                                                        stroke="currentColor" class="w-6 h-6">
                                                                        <path stroke-linecap="round"
                                                                            stroke-linejoin="round"
                                                                            d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" />
                                                                    </svg>

                                                                </span>
                                                                <span class="ml-2 text-sm tracking-wide truncate">Total
                                                                    Attendance</span>
                                                            </a>
                                                        </li>

                                                        <li>
                                                            <a href="/logout"
                                                                class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-gray-50 text-gray-600 hover:text-gray-800 border-l-4 border-transparent hover:border-indigo-500 pr-6">
                                                                <span
                                                                    class="inline-flex justify-center items-center ml-4">
                                                                    <svg class="w-5 h-5" fill="none"
                                                                        stroke="currentColor" viewBox="0 0 24 24"
                                                                        xmlns="http://www.w3.org/2000/svg">
                                                                        <path stroke-linecap="round"
                                                                            stroke-linejoin="round" stroke-width="2"
                                                                            d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1">
                                                                        </path>
                                                                    </svg>
                                                                </span>
                                                                <span
                                                                    class="ml-2 text-sm tracking-wide truncate">Logout</span>
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>

                                            <!-- Main Content -->
                                            <!-- Profile -->
                                            <div class="col-span-1 md:col-span-4">
                                                <div class="mx-4 md:mx-8 mt-10 " id="sprofile"
                                                    style="margin-bottom: 94px;">
                                                    <div>
                                                        <h3
                                                            class="text-lg font-semibold leading-7 text-gray-900 md:text-base">
                                                            Information</h3>
                                                        <p class="mt-1 text-sm leading-6 text-gray-500">Personal
                                                            details</p>
                                                        <div class="mt-4 border-t border-gray-200">
                                                            <dl class="divide-y divide-gray-200">
                                                                <div
                                                                    class="py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                                                    <dt
                                                                        class="text-sm font-medium leading-5 text-gray-500">
                                                                        Full name</dt>
                                                                    <dd
                                                                        class="mt-1 text-sm leading-5 text-gray-900 sm:col-span-2">
                                                                        <%= userData.fullName %>
                                                                    </dd>
                                                                </div>
                                                                <div
                                                                    class="py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                                                    <dt
                                                                        class="text-sm font-medium leading-5 text-gray-500">
                                                                        Email address</dt>
                                                                    <dd
                                                                        class="mt-1 text-sm leading-5 text-gray-900 sm:col-span-2">
                                                                        <%= userData.email %>
                                                                    </dd>
                                                                </div>
                                                                <div
                                                                    class="py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                                                    <dt
                                                                        class="text-sm font-medium leading-5 text-gray-500">
                                                                        Year</dt>
                                                                    <dd
                                                                        class="mt-1 text-sm leading-5 text-gray-900 sm:col-span-2">
                                                                        <%= userData.year %>
                                                                    </dd>
                                                                </div>
                                                            </dl>
                                                        </div>
                                                    </div>
                                                </div>

                                                <% var totalDays=teacherData.lectures.length; %>
                                                    <% var presentDays=0; %>
                                                        <% userData.attendance.forEach(function(a) { %>
                                                            <% if (a.status==="present" ) { %>
                                                                <% presentDays++; %>
                                                                    <% } %>
                                                                        <% }) %>
                                                                            <% var attendancePercentage=(presentDays /
                                                                                totalDays) * 100; %>



                                                                                <!--   Attendance of Students  -->
                                                                                <div class="justify-center">
                                                                                    <div id="sattend" class="hidden">
                                                                                        <h2 class="text-lg">Your current
                                                                                            attendance is
                                                                                            <%=(attendancePercentage.toFixed(2))%>
                                                                                                %</h2>
                                                                                        <div class="skill-container">
                                                                                            <div class="skill">
                                                                                                <div class="outer">
                                                                                                    <div class="inner">
                                                                                                        <div class="number"
                                                                                                            data-num="<%=attendancePercentage%>">
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                                <svg class="svg"
                                                                                                    xmlns="http://www.w3.org/2000/svg"
                                                                                                    version="1.1"
                                                                                                    width="160px"
                                                                                                    height="160px">
                                                                                                    <defs>
                                                                                                        <linearGradient
                                                                                                            id="GradientColor">
                                                                                                            <stop
                                                                                                                offset="0%"
                                                                                                                stop-color="#e91e63" />
                                                                                                            <stop
                                                                                                                offset="100%"
                                                                                                                stop-color="#673ab7" />
                                                                                                        </linearGradient>
                                                                                                    </defs>
                                                                                                    <circle
                                                                                                        class="circle"
                                                                                                        cx="80" cy="80"
                                                                                                        r="70"
                                                                                                        stroke-linecap="round" />
                                                                                                </svg>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>



                      
                                <footer class="bg-body-tertiary text-center text-lg-start mt-8 footer ">
                                    <!-- Copyright -->
                                    <div class="text-center p-3 bg-indigo-500">
                                        © 2024 Copyright:
                                        <a class="text-body" href="/">Attendance Portal</a>
                                    </div>
                                    <!-- Copyright -->
                                </footer>

                                <script src="js/tab.script2.js"></script>
                                <%- include('partials/scriptlink')%>
</body>
<script>
    const numbers = document.querySelectorAll('.number');
    const svgEl = document.querySelectorAll('svg circle');
    const counters = Array(numbers.length);
    const intervals = Array(counters.length);
    counters.fill(0);


    console.log("Hello World!!")

    numbers.forEach((number, index) => {
        intervals[index] = setInterval(() => {
            if (counters[index] === parseInt(number.dataset.num)) {
                clearInterval(counters[index]);
            } else {
                counters[index] += 1;
                number.innerHTML = counters[index] + "%";
                svgEl[index].style.strokeDashoffset = Math.floor(472 - 440 * parseFloat(number.dataset.num / 100));
            }
        }, 20);
    });

</script>

</html>